<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NovaVault - Home</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    :root{ --bg:#0f1222; --card:#161a2f; --accent:#7c5cff; --accent-2:#4ad4ff; --text:#e8eaed; --muted:#a8b0c2; }
    body{ margin:0; font-family:Inter, sans-serif; color:var(--text); background: var(--bg); min-height: 100vh; display: flex; flex-direction: column; }
    .container{ max-width:1100px; margin:0 auto; padding:32px 20px; flex: 1; }
    header{ display:flex; align-items:center; justify-content:space-between; }
    .brand{ display:flex; align-items:center; gap:12px; }
    .logo{ width:40px; height:40px; border-radius:12px; background:linear-gradient(135deg, var(--accent), var(--accent-2)); }
    .btn{ cursor:pointer; font-weight:600; border-radius:12px; padding:10px 16px; border:none; color:var(--text); background:#232845; }
    .btn-primary{ background:linear-gradient(135deg, var(--accent), var(--accent-2)); color:#0b0f1a; }
    .modal-backdrop{ position:fixed; inset:0; background:#000000aa; backdrop-filter:blur(4px); display:none; align-items:center; justify-content:center; z-index:50; }
    .modal{ width:100%; max-width:500px; background:#121631; border-radius:18px; padding:24px; border:1px solid #2a3154; }
    .form{ display:grid; gap:15px; }
    .form input{ padding:12px; border-radius:10px; border:1px solid #2a3154; background:#0f1328; color:white; }
    .tabs{ display:flex; gap:10px; margin-bottom: 20px; }
    .tab{ flex:1; padding:10px; background:#232845; border-radius:8px; cursor:pointer; text-align:center; }
    .tab.active{ background:var(--accent); color:white; }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand"><div class="logo"></div><h1>NovaVault</h1></div>
      <nav><button class="btn" id="open-auth">Login / Register</button> <a href="Constraints.html"><button class="btn btn-primary">Password Generator</button></a></nav>
    </header>
    <main style="text-align: center; margin-top: 100px;">
      <h2>Welcome to NovaVault</h2>
      <p style="color:var(--muted)">Your secure, cloud-synced password manager.</p>
    </main>
  </div>

  <div class="modal-backdrop" id="auth-modal">
    <div class="modal">
      <div class="tabs"><div class="tab active" id="tab-login-btn">Login</div><div class="tab" id="tab-reg-btn">Register</div></div>
      <form class="form" id="register-form" style="display:none">
        <input type="text" id="reg-name" placeholder="Full Name" required>
        <input type="email" id="reg-email" placeholder="Email Address" required>
        <input type="password" id="reg-pass" placeholder="Password" required>
        <input type="password" id="reg-confirm" placeholder="Confirm Password" required>
        <button type="submit" class="btn btn-primary">Create Account Online</button>
      </form>
      <div id="login-info" style="text-align:center;"><p>Already have an account?</p><a href="PG-2.html"><button class="btn btn-primary">Go to Login Page</button></a></div>
      <button class="btn" style="margin-top:20px; width:100%" onclick="document.getElementById('auth-modal').style.display='none'">Close</button>
    </div>
  </div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
  import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyC4tcA_TjLw6tsxjUyuhlIQkj2Yg4EZ530",
    authDomain: "novavault-e5e9f.firebaseapp.com",
    projectId: "novavault-e5e9f",
    databaseURL: "https://novavault-e5e9f-default-rtdb.firebaseio.com/", // EXPLICIT URL
    storageBucket: "novavault-e5e9f.firebasestorage.app",
    appId: "1:24832406592:web:1b1b185bfc0310e9e55ba5"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getDatabase(app);

  // ... (Keep your modal display logic) ...

  document.getElementById('register-form').onsubmit = async (e) => {
    e.preventDefault();
    const email = document.getElementById('reg-email').value;
    const pass = document.getElementById('reg-pass').value;
    
    const masterKey = prompt("Set your Master Key:");
    if(!masterKey) return;

    try {
      const userCredential = await createUserWithEmailAndPassword(auth, email, pass);
      // Save data using the UID as the folder name
      await set(ref(db, 'users/' + userCredential.user.uid), {
        email: email,
        masterKey: masterKey
      });
      alert("Registration Successful!");
      window.location.href = "PG-2.html";
    } catch (error) { alert(error.message); }
  };
</script>
</body>

</html>
